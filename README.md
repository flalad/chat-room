# ç§äººèŠå¤©å®¤ - ç°ä»£åŒ–å®æ—¶èŠå¤©åº”ç”¨

ä¸€ä¸ªåŸºäº Node.js å’Œ Socket.IO çš„ç°ä»£åŒ–ç§äººèŠå¤©å®¤åº”ç”¨ï¼Œé‡‡ç”¨ Telegram é£æ ¼çš„ä¸‰æ å¸ƒå±€è®¾è®¡ï¼Œæ”¯æŒå®æ—¶æ¶ˆæ¯ä¼ é€’ã€æ–‡ä»¶åˆ†äº«ã€ç”¨æˆ·ç®¡ç†å’Œä¸»é¢˜å®šåˆ¶ã€‚

## ğŸŒŸ ä¸»è¦ç‰¹æ€§

### ğŸ¨ ç•Œé¢è®¾è®¡
- **Apple é£æ ¼çª—å£**ï¼šä»¿ macOS çª—å£è®¾è®¡ï¼Œå¸¦æœ‰æ ‡é¢˜æ å’Œæ§åˆ¶æŒ‰é’®
- **Telegram é£æ ¼å¸ƒå±€**ï¼šä¸‰æ å¼å¸ƒå±€ï¼ˆèŠå¤©åˆ—è¡¨ã€ä¸»èŠå¤©åŒºã€ç¾¤ç»„ä¿¡æ¯ï¼‰
- **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯é€‚é…
- **ä¸»é¢˜ç³»ç»Ÿ**ï¼šå†…ç½®å¤šç§èƒŒæ™¯ä¸»é¢˜ï¼ŒåŒ…æ‹¬æ¸å˜å’Œå›¾æ¡ˆç»„åˆ

### ğŸ’¬ èŠå¤©åŠŸèƒ½
- **å®æ—¶æ¶ˆæ¯**ï¼šåŸºäº Socket.IO çš„å®æ—¶åŒå‘é€šä¿¡
- **æ–‡ä»¶åˆ†äº«**ï¼šæ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€æ–‡æ¡£ç­‰å¤šç§æ–‡ä»¶ç±»å‹
- **æ‹–æ‹½ä¸Šä¼ **ï¼šæ”¯æŒæ‹–æ‹½æ–‡ä»¶åˆ°èŠå¤©åŒºåŸŸç›´æ¥ä¸Šä¼ 
- **æ¶ˆæ¯æœç´¢**ï¼šå®æ—¶æœç´¢èŠå¤©å†å²è®°å½•
- **åœ¨çº¿çŠ¶æ€**ï¼šæ˜¾ç¤ºåœ¨çº¿ç”¨æˆ·æ•°é‡å’Œæˆå‘˜åˆ—è¡¨

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- **ç”¨æˆ·æ³¨å†Œ/ç™»å½•**ï¼šå®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **è§’è‰²æƒé™**ï¼šç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·æƒé™åˆ†ç¦»
- **ç®¡ç†å‘˜åå°**ï¼šç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½®ç­‰åŠŸèƒ½
- **ä¸ªäººä¿¡æ¯**ï¼šç”¨æˆ·èµ„æ–™æŸ¥çœ‹å’Œç¼–è¾‘

### ğŸ­ ä¸»é¢˜å®šåˆ¶
- **å¤šç§èƒŒæ™¯**ï¼š
  - é»˜è®¤ç®€æ´èƒŒæ™¯
  - æ¶‚é¸¦æ¢¦å¢ƒï¼ˆå››è§’æ¸å˜ + æ¶‚é¸¦å›¾æ¡ˆï¼‰
  - å¤šç§å½©è‰²æ¸å˜ä¸»é¢˜
- **å®æ—¶åˆ‡æ¢**ï¼šæ— éœ€åˆ·æ–°é¡µé¢å³å¯åˆ‡æ¢ä¸»é¢˜
- **æœ¬åœ°å­˜å‚¨**ï¼šä¸»é¢˜é€‰æ‹©è‡ªåŠ¨ä¿å­˜

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§
- **ç°ä»£åŒ–æ¶æ„**ï¼šES6+ JavaScriptï¼Œæ¨¡å—åŒ–è®¾è®¡
- **å®æ—¶é€šä¿¡**ï¼šSocket.IO å®ç°ä½å»¶è¿Ÿæ¶ˆæ¯ä¼ é€’
- **æ–‡ä»¶å­˜å‚¨**ï¼šæ”¯æŒæœ¬åœ°å­˜å‚¨å’Œ AWS S3 äº‘å­˜å‚¨
- **å®‰å…¨è®¤è¯**ï¼šJWT Token è®¤è¯ï¼Œå¯†ç åŠ å¯†å­˜å‚¨
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆæœºåˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 14.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- npm æˆ– yarn åŒ…ç®¡ç†å™¨

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd chat-room
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å‚æ•°ï¼š
```env
PORT=3000
JWT_SECRET=your-jwt-secret-key
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your-admin-password

# AWS S3 é…ç½®ï¼ˆå¯é€‰ï¼‰
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=your-region
S3_BUCKET_NAME=your-bucket-name
```

4. **å¯åŠ¨åº”ç”¨**
```bash
npm start
```

5. **è®¿é—®åº”ç”¨**
æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`

## ğŸ“ é¡¹ç›®ç»“æ„

```
chat-room/
â”œâ”€â”€ public/                 # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ css/               # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ apple-window.css    # çª—å£å’Œç”¨æˆ·ç•Œé¢æ ·å¼
â”‚   â”‚   â”œâ”€â”€ telegram.css        # Telegram é£æ ¼å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ theme-settings.css  # ä¸»é¢˜è®¾ç½®æ ·å¼
â”‚   â”‚   â”œâ”€â”€ components.css      # ç»„ä»¶æ ·å¼
â”‚   â”‚   â”œâ”€â”€ auth.css           # è®¤è¯é¡µé¢æ ·å¼
â”‚   â”‚   â”œâ”€â”€ main.css           # ä¸»è¦æ ·å¼
â”‚   â”‚   â”œâ”€â”€ reset.css          # CSS é‡ç½®
â”‚   â”‚   â””â”€â”€ responsive.css     # å“åº”å¼æ ·å¼
â”‚   â”œâ”€â”€ js/                # JavaScript æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ app.js             # åº”ç”¨ä¸»å…¥å£
â”‚   â”‚   â”œâ”€â”€ auth.js            # è®¤è¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ chat.js            # èŠå¤©åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ theme-manager.js   # ä¸»é¢˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ file-upload.js     # æ–‡ä»¶ä¸Šä¼ 
â”‚   â”‚   â”œâ”€â”€ user-interface.js  # ç”¨æˆ·ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ room-manager.js    # æˆ¿é—´ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ s3-config.js       # S3 é…ç½®
â”‚   â”‚   â”œâ”€â”€ auth-page.js       # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ ui.js              # UI å·¥å…·
â”‚   â”‚   â”œâ”€â”€ config.js          # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils.js           # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ images/            # å›¾ç‰‡èµ„æº
â”‚   â”‚   â””â”€â”€ backgrounds/       # èƒŒæ™¯å›¾ç‰‡
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ login.html         # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ register.html      # æ³¨å†Œé¡µé¢
â”‚   â””â”€â”€ admin.html         # ç®¡ç†å‘˜é¡µé¢
â”œâ”€â”€ server.js              # æœåŠ¡å™¨ä¸»æ–‡ä»¶
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£
```

## ğŸ¨ ä¸»é¢˜ç³»ç»Ÿ

### å†…ç½®ä¸»é¢˜
1. **é»˜è®¤ä¸»é¢˜**ï¼šç®€æ´çš„ç™½è‰²èƒŒæ™¯
2. **æ¶‚é¸¦æ¢¦å¢ƒ**ï¼šå››è§’æ¸å˜èƒŒæ™¯é…åˆæ¶‚é¸¦å›¾æ¡ˆ
3. **å½©è‰²æ¸å˜**ï¼šå¤šç§æ¸å˜è‰²å½©ä¸»é¢˜

### è‡ªå®šä¹‰ä¸»é¢˜
å¯ä»¥é€šè¿‡ä¿®æ”¹ `public/css/theme-settings.css` æ·»åŠ æ–°çš„ä¸»é¢˜ï¼š

```css
.theme-custom {
    background: your-custom-background;
}
```

## ğŸ” ç”¨æˆ·æƒé™

### ç®¡ç†å‘˜æƒé™
- è®¿é—®ç®¡ç†å‘˜åå°
- ç”¨æˆ·ç®¡ç†ï¼ˆæŸ¥çœ‹ã€åˆ é™¤ç”¨æˆ·ï¼‰
- ç³»ç»Ÿé…ç½®
- èŠå¤©å®¤ç®¡ç†

### æ™®é€šç”¨æˆ·æƒé™
- å‘é€æ¶ˆæ¯å’Œæ–‡ä»¶
- æŸ¥çœ‹ä¸ªäººä¿¡æ¯
- åˆ‡æ¢ä¸»é¢˜
- æœç´¢æ¶ˆæ¯

## ğŸ“± API æ¥å£

### è®¤è¯æ¥å£
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/verify` - éªŒè¯ Token

### ç®¡ç†å‘˜æ¥å£
- `POST /api/admin/login` - ç®¡ç†å‘˜ç™»å½•
- `GET /api/admin/verify` - éªŒè¯ç®¡ç†å‘˜ Token
- `GET /api/admin/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `DELETE /api/admin/users/:id` - åˆ é™¤ç”¨æˆ·

### æ–‡ä»¶æ¥å£
- `POST /api/upload` - æ–‡ä»¶ä¸Šä¼ 
- `GET /uploads/:filename` - æ–‡ä»¶ä¸‹è½½

## ğŸŒ éƒ¨ç½²æŒ‡å—

### æœ¬åœ°éƒ¨ç½²

1. **å¼€å‘ç¯å¢ƒ**
```bash
npm run dev  # å¦‚æœé…ç½®äº†å¼€å‘è„šæœ¬
# æˆ–
node server.js
```

2. **ç”Ÿäº§ç¯å¢ƒ**
```bash
NODE_ENV=production node server.js
```

### Docker éƒ¨ç½²

1. **åˆ›å»º Dockerfile**
```dockerfile
FROM node:16-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE 3000

CMD ["node", "server.js"]
```

2. **æ„å»ºå’Œè¿è¡Œ**
```bash
docker build -t chat-room .
docker run -p 3000:3000 --env-file .env chat-room
```

### äº‘å¹³å°éƒ¨ç½²

#### Heroku éƒ¨ç½²

1. **å®‰è£… Heroku CLI**
```bash
npm install -g heroku
```

2. **ç™»å½•å¹¶åˆ›å»ºåº”ç”¨**
```bash
heroku login
heroku create your-app-name
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
heroku config:set JWT_SECRET=your-jwt-secret
heroku config:set ADMIN_USERNAME=admin
heroku config:set ADMIN_PASSWORD=your-password
```

4. **éƒ¨ç½²**
```bash
git add .
git commit -m "Deploy to Heroku"
git push heroku main
```

#### Vercel éƒ¨ç½²

1. **å®‰è£… Vercel CLI**
```bash
npm install -g vercel
```

2. **é…ç½® vercel.json**
```json
{
  "version": 2,
  "builds": [
    {
      "src": "server.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/server.js"
    }
  ]
}
```

3. **éƒ¨ç½²**
```bash
vercel --prod
```

#### AWS EC2 éƒ¨ç½²

1. **è¿æ¥åˆ° EC2 å®ä¾‹**
```bash
ssh -i your-key.pem ubuntu@your-ec2-ip
```

2. **å®‰è£… Node.js**
```bash
curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -
sudo apt-get install -y nodejs
```

3. **å…‹éš†å’Œé…ç½®é¡¹ç›®**
```bash
git clone <your-repo-url>
cd chat-room
npm install
```

4. **ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹**
```bash
sudo npm install -g pm2
pm2 start server.js --name "chat-room"
pm2 startup
pm2 save
```

5. **é…ç½® Nginxï¼ˆå¯é€‰ï¼‰**
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

#### é˜¿é‡Œäº‘/è…¾è®¯äº‘éƒ¨ç½²

1. **è´­ä¹°äº‘æœåŠ¡å™¨**
   - é€‰æ‹©åˆé€‚çš„é…ç½®ï¼ˆæ¨è 2æ ¸4G ä»¥ä¸Šï¼‰
   - å®‰è£… Ubuntu 20.04 æˆ– CentOS 8

2. **å®‰è£…ç¯å¢ƒ**
```bash
# Ubuntu
sudo apt update
sudo apt install nodejs npm nginx -y

# CentOS
sudo yum update
sudo yum install nodejs npm nginx -y
```

3. **é…ç½®é˜²ç«å¢™**
```bash
# Ubuntu
sudo ufw allow 22
sudo ufw allow 80
sudo ufw allow 443
sudo ufw enable

# CentOS
sudo firewall-cmd --permanent --add-port=22/tcp
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --permanent --add-port=443/tcp
sudo firewall-cmd --reload
```

4. **é…ç½®åŸŸåå’Œ SSL**
```bash
# ä½¿ç”¨ Let's Encrypt
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
- `PORT`: æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ 3000ï¼‰
- `JWT_SECRET`: JWT å¯†é’¥ï¼ˆå¿…é¡»è®¾ç½®ï¼‰
- `ADMIN_USERNAME`: ç®¡ç†å‘˜ç”¨æˆ·å
- `ADMIN_PASSWORD`: ç®¡ç†å‘˜å¯†ç 
- `AWS_*`: AWS S3 é…ç½®ï¼ˆå¯é€‰ï¼‰

### æ–‡ä»¶ä¸Šä¼ é…ç½®
- æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼šå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€æ–‡æ¡£
- æœ€å¤§æ–‡ä»¶å¤§å°ï¼š50MBï¼ˆå¯åœ¨ server.js ä¸­ä¿®æ”¹ï¼‰
- å­˜å‚¨æ–¹å¼ï¼šæœ¬åœ°å­˜å‚¨æˆ– AWS S3

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£è¢«å ç”¨**
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3000
# æ€æ­»è¿›ç¨‹
kill -9 <PID>
```

2. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥ uploads ç›®å½•æƒé™
   - ç¡®è®¤æ–‡ä»¶å¤§å°é™åˆ¶
   - éªŒè¯ S3 é…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰

3. **Socket.IO è¿æ¥å¤±è´¥**
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   - ç¡®è®¤ WebSocket æ”¯æŒ
   - éªŒè¯ä»£ç†é…ç½®

4. **ä¸»é¢˜ä¸ç”Ÿæ•ˆ**
   - æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
   - æ£€æŸ¥ CSS æ–‡ä»¶è·¯å¾„
   - éªŒè¯ä¸»é¢˜æ–‡ä»¶å®Œæ•´æ€§

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ GitHub Issue
- å‘é€é‚®ä»¶è‡³ï¼š[your-email@example.com]

---

**äº«å—èŠå¤©çš„ä¹è¶£ï¼** ğŸ‰